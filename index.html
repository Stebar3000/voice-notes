<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Voice Notes Auto</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1e293b">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Voice Notes">
    
    <!-- Links with version query to prevent caching issues -->
    <link rel="manifest" href="manifest.json?v=3.3">
    <link rel="apple-touch-icon" href="icons/icon-256x256.png?v=3.3">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-container">
        <main class="main-content">
            <header class="app-header">
                <span class="app-title">Voice Notes Auto</span>
                <span class="app-version">v3.3</span>
            </header>

            <div class="status-text" id="statusText">Pronto per registrare</div>
            <div class="timer" id="timer">00:00</div>

            <button class="record-button idle" id="recordButton">
                <span id="buttonText">INIZIA</span>
                <div class="recording-indicator" id="recordingIndicator" style="display: none;"></div>
            </button>

            <div class="transcription-area" id="transcriptionArea" style="display: none;">
                <div class="transcription-label">Trascrizione in tempo reale:</div>
                <div class="transcription-text-wrapper">
                    <div class="transcription-text" id="transcriptionText">
                        <span id="finalTranscript"></span><span class="transcription-interim" id="interimTranscript"></span>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer-content">
            <div class="controls-grid">
                <button class="control-btn" id="reviewNotesBtn">Rivedi Note</button>
                <button class="control-btn" id="speechToggle">Trascrizione</button>
                <button class="control-btn" id="exportAggregatedBtn">Export</button>
                <button class="control-btn" id="newSessionBtn">Nuova Sessione</button>
            </div>
            <div class="instructions">
                Click: Inizia/Pausa &bull; Doppio Click: Salva
            </div>
        </footer>
    </div>
    
    <!-- Modals and Scripts remain the same -->
    <div class="modal-overlay" id="reviewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Note Salvate</h2>
                <button class="modal-close-btn" id="reviewModalCloseBtn">&times;</button>
            </div>
            <div class="modal-body" id="notesListContainer"></div>
        </div>
    </div>
    <div class="modal-overlay" id="confirmModal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>Conferma Azione</h3>
            </div>
            <div class="modal-body">
                <p id="confirmModalText"></p>
                <div class="modal-actions">
                    <button class="modal-btn cancel" id="confirmCancelBtn">Annulla</button>
                    <button class="modal-btn confirm" id="confirmOkBtn">Conferma</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.min.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/recording.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
