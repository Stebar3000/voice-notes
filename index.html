<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Voice Notes Auto</title>
    
    <!-- PWA Meta Tags per migliore integrazione mobile -->
    <meta name="theme-color" content="#1e293b">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Voice Notes">
    
    <!-- Manifest e Icone -->
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiVm9pY2UgTm90ZXMgQXV0byIsInNob3J0X25hbWUiOiJWb2ljZU5vdGVzIiwic3RhcnRfdXJsIjoiLiIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiMxZTI5M2IiLCJ0aGVtZV9jb2xvciI6IiMxZTI5M2IiLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTWpRaUlHaGxhV2RvZEQwaU1qUWlJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnYm1GdFpYTndZV05sUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK1BIQmhkR2dnWkQwaVRUZ2dNVE5oTlNBMUlEQWdNUzR4SURFZ01URWdNaVl6SURBZ01URTRNaTQzTlNBek5pNHlOQ0EyTlM0ME15QTFOQ0EwTGpVNElEQWdNUzQ0TGpGaE5TQTFJREFnTUNBMExqVWdNell1TWpSYU1UZ2dNVE52TFRJZ01UQmhOaUEySUdGYU1EQTVMVFV1TVVFMU5TQTFJREFnTUNBNUlGUnRNQ0EzWXpBZ01TNDNMaTQwSUVNZ01UUWdNVzV2TVMweUlERXdMaTQySUZObE56QXVOelVnTUNBNUlEVjFMalZoTmkwMklEZ2dPV0ZhSWlCbWFXeHNQU0lqWVdOaVkya2lMejQ4TDNOMlp6ND0iLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XX0=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMnM0LjQ4IDEwIDEwIDEwIDEwLTQuNDggMTAtMTBTMTcuNTIgMiAxMiAyem0xIDE1aC0ydi02aDJ2NnptMC04aC0ydi0yaDJ2MnoiIGZpbGw9IiNmMWY1ZjkiLz48L3N2Zz4=">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMmM1LjUyIDAgMTAgNC40OCAxMCAxMHMtNC40OCAxMC0xMCAxMCUzIDIzLjUyIDIgMTggMiA2LjQ4IDIgMTJ6bS0xIDVoMlY4aC0ydjR6bTEgN2gydi0yaC0ydi0yLjVoLTJWMTdoMnYyLjV6IiBmaWxsPSIjOWNhM2I4Ii8+PC9zdmc+">
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Area Principale dell'Interfaccia -->
        <main class="main-content">
            <div class="status-text" id="statusText">Pronto per registrare</div>
            <div class="timer" id="timer">00:00</div>

            <button class="record-button idle" id="recordButton">
                <span id="buttonText">INIZIA</span>
                <div class="recording-indicator" id="recordingIndicator" style="display: none;"></div>
            </button>

            <div class="transcription-area" id="transcriptionArea" style="display: none;">
                <div class="transcription-label">Trascrizione in tempo reale:</div>
                <div class="transcription-text" id="transcriptionText">
                    <span id="finalTranscript"></span>
                    <span class="transcription-interim" id="interimTranscript"></span>
                </div>
            </div>
        </main>

        <!-- Sezione Controlli e Info -->
        <footer class="footer-content">
            <div class="controls-section">
                <div class="speech-controls">
                    <button class="speech-toggle active" id="speechToggle">
                        üé§ Trascrizione attiva
                    </button>
                </div>
                <div class="export-controls">
                    <button class="export-btn" id="exportAggregatedBtn">
                        üìö Export Note Aggregate
                    </button>
                </div>
                 <div class="auto-save-status" id="autoSaveStatus">
                    Backup automatico attivo
                </div>
            </div>

            <div class="instructions">
                Click: Inizia/Pausa/Riprendi ‚Ä¢ Doppio Click: Salva nota<br>
                <small>Usa: "TAG [nome] - [testo]" o "AMBITO [nome] FINE [testo]"</small>
            </div>
        </footer>
    </div>
    
    <!-- Modal per copiare testo su iOS (fallback) -->
    <div class="copy-modal" id="copyModal">
        <div class="copy-modal-content">
            <h3>Copia il testo della nota</h3>
            <p>L'export automatico non √® supportato. Copia manualmente il testo.</p>
            <textarea id="copyTextarea" readonly></textarea>
            <div class="copy-modal-buttons">
                <button class="modal-btn copy" id="copyModalBtn">üìã Copia</button>
                <button class="modal-btn close" id="closeModalBtn">‚úñÔ∏è Chiudi</button>
            </div>
        </div>
    </div>

    <!-- Indicatore di versione -->
    <div class="version-indicator">v2.0-stable</div>

    <!-- Scripts (caricati alla fine per performance) -->
    <script src="storage.js"></script>
    <script src="recording.js"></script>
    <script src="ui.js"></script>
    <script src="app.js"></script>
</body>